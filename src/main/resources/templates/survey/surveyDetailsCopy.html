<div th:replace="~{fragments/layout::layout(~{::section})}">

    <section class="mx-auto w-[95%] md:w-[90%] py-2">
        <div class="py-3 flex flex-col-reverse lg:flex-row gap-3">
            <div class="flex-grow-5 survey-details shadow-md">
                <div class="w-full bg-gradient-to-r from-indigo-500 via-purple-500 to-indigo-500 h-2 rounded-t-md"></div>
                <div class="header-section flex flex-row justify-between items-start md:items-center gap-y-4 px-5 pt-3">
                    <div class="flex flex-col md:flex-row items-start md:items-center gap-2">
                        <p class="text-lg md:text-xl font-semibold text-indigo-700">Survey Details</p>
                        <span
                                th:text="${survey.generatedSurveyId}"
                                class="text-indigo-800 bg-indigo-100 px-3 py-1 text-xs rounded-xl">
                  </span>
                    </div>

                    <div class="flex items-center gap-x-1 text-xs rounded-xl border px-4 py-1 text-center"
                         th:classappend="${survey.status.name() == 'PENDING' ? 'text-yellow-600 bg-yellow-50 border-yellow-400' :
                           survey.status.name() == 'SUCCEEDED' ? 'text-green-600 bg-green-50 border-green-400' :
                           survey.status.name() == 'FAILED' ? 'text-red-600 bg-red-50 border-red-400' : ''}">
                        <div class="w-2 h-2 rounded-full"></div>
                        <i th:class="${survey.status.name() == 'PENDING'    ? 'fa-solid fa-hourglass-half text-yellow-500' :
                          survey.status.name() == 'SUCCEEDED'  ? 'fa-solid fa-circle-check text-green-500' :
                          survey.status.name() == 'FAILED'  ? 'fa-solid fa-circle-xmark text-red-500' :
                          'fa-solid fa-question-circle'}"></i>
                        <p th:text="${survey.status.name()}"></p>
                    </div>
                </div>
                <div class="survey-details-body px-5 py-4">
                    <form method="post"
                          th:action="@{/sale/survey/edit/{id}}">
                        <div class="wild-card flex flex-col gap-y-3 mt-2">
                            <div class="flex flex-row items-center gap-x-2">
                                <i class="fa-solid fa-exclamation-circle text-indigo-500"></i>
                                <p>Basic Information</p>
                            </div>
                            <hr class="h-1 text-gray-200">

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="flex flex-col gap-y-1">
                                    <label for="generatedSurveyId"
                                           class="text-xs font-light">
                                        Generated Survey Id
                                    </label>
                                    <div class="relative pointer-event-none">
                                        <input
                                                th:value="${survey.generatedSurveyId}"
                                                type="text" name="generatedSurveyId"
                                                class="focus:outline-none border-b-1 border-gray-300 text-sm w-full pe-5"
                                                readonly
                                                id="generatedSurveyId">
                                        <div class="absolute right-2 top-1/2 -translate-y-1/2">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pencil-off-icon lucide-pencil-off"><path d="m10 10-6.157 6.162a2 2 0 0 0-.5.833l-1.322 4.36a.5.5 0 0 0 .622.624l4.358-1.323a2 2 0 0 0 .83-.5L14 13.982"/><path d="m12.829 7.172 4.359-4.346a1 1 0 1 1 3.986 3.986l-4.353 4.353"/><path d="m15 5 4 4"/><path d="m2 2 20 20"/></svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex flex-col gap-y-1">
                                    <label for="customerName"
                                           class="text-xs font-light">
                                        Customer Name
                                    </label>
                                    <input
                                            th:value="${survey.customerName}"
                                            type="text" name="customerName"
                                            class="focus:outline-none border-b-1 border-gray-300 text-sm"
                                            id="customerName">
                                </div>
                                <div class="flex flex-col gap-y-1">
                                    <label for="salePerson"
                                           class="text-xs font-light">
                                        Sale Person
                                    </label>
                                    <div class="relative pointer-event-none">
                                        <input
                                                th:value="${survey.salePerson.fullName}"
                                                type="text" name="salePerson"
                                                class="focus:outline-none border-b-1 border-gray-300 text-sm w-full"
                                                readonly
                                                id="salePerson">
                                        <div class="absolute right-2 top-1/2 -translate-y-1/2">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pencil-off-icon lucide-pencil-off"><path d="m10 10-6.157 6.162a2 2 0 0 0-.5.833l-1.322 4.36a.5.5 0 0 0 .622.624l4.358-1.323a2 2 0 0 0 .83-.5L14 13.982"/><path d="m12.829 7.172 4.359-4.346a1 1 0 1 1 3.986 3.986l-4.353 4.353"/><path d="m15 5 4 4"/><path d="m2 2 20 20"/></svg>
                                        </div>
                                    </div>

                                </div>
                                <div class="flex flex-col gap-y-1">
                                    <label for="technicalPerson"
                                           class="text-xs font-light">
                                        Technical Person
                                    </label>
                                    <div class="relative pointer-event-none">
                                        <input
                                                th:value="${survey.technicalPerson != nul?survey.technicalPerson.fullName : 'Not Assigned'}"
                                                type="text" name="technicalPerson"
                                                class="focus:outline-none border-b-1 border-gray-300 text-sm w-full"
                                                readonly
                                                id="technicalPerson">
                                        <div class="absolute right-2 top-1/2 -translate-y-1/2">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pencil-off-icon lucide-pencil-off"><path d="m10 10-6.157 6.162a2 2 0 0 0-.5.833l-1.322 4.36a.5.5 0 0 0 .622.624l4.358-1.323a2 2 0 0 0 .83-.5L14 13.982"/><path d="m12.829 7.172 4.359-4.346a1 1 0 1 1 3.986 3.986l-4.353 4.353"/><path d="m15 5 4 4"/><path d="m2 2 20 20"/></svg>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <div class="wild-card flex flex-col gap-y-2 mt-5">
                            <div class="flex flex-row items-center gap-x-2 pt-3">
                                <i class="fa-solid fa-map text-indigo-500"></i>
                                <p>Location Information</p>
                            </div>
                            <hr class="h-1 text-gray-200">

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="flex flex-col gap-y-1">
                                    <label for="state"
                                           class="text-xs font-light">
                                        State
                                    </label>
                                    <input
                                            th:value="${survey.state}"
                                            type="text" name="state"
                                            class="focus:outline-none border-b-1 border-gray-300 text-sm"
                                            id="state">
                                </div>
                                <div class="flex flex-col gap-y-1">
                                    <label for="townShip"
                                           class="text-xs font-light">
                                        TownShip
                                    </label>
                                    <input
                                            th:value="${survey.townShip}"
                                            type="text" name="townShip"
                                            class="focus:outline-none border-b-1 border-gray-300 text-sm"
                                            id="townShip">
                                </div>
                                <div class="flex flex-col gap-y-1">
                                    <label for="longitude"
                                           class="text-xs font-light">
                                        Longitude
                                    </label>
                                    <input
                                            th:value="${survey.longitude}"
                                            type="text" name="longitude"
                                            class="focus:outline-none border-b-1 border-gray-300 text-sm"
                                            id="longitude">
                                </div>
                                <div class="flex flex-col gap-y-1">
                                    <label for="latitude"
                                           class="text-xs font-light">
                                        Latitude
                                    </label>
                                    <input
                                            th:value="${survey.latitude}"
                                            type="text" name="latitude"
                                            class="focus:outline-none border-b-1 border-gray-300 text-sm"
                                            id="latitude">
                                </div>
                            </div>
                        </div>

                        <div class="wild-card flex flex-col gap-y-2 mt-5">
                            <div class="flex flex-row items-center gap-x-2 pt-3">
                                <i class="fa-solid fa-circle-info text-indigo-500"></i>
                                <p>More Information</p>
                            </div>
                            <hr class="h-1 text-gray-200">

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="flex flex-col gap-y-1">
                                    <label for="phoneNumber"
                                           class="text-xs font-light">
                                        Customer's Phone
                                    </label>
                                    <input
                                            th:value="${survey.phoneNumber}"
                                            type="text" name="phoneNumber"
                                            class="focus:outline-none border-b-1 border-gray-300 text-sm"
                                            id="phoneNumber">
                                </div>
                                <div class="flex flex-col gap-y-1">
                                    <label for="status"
                                           class="text-xs font-light">
                                        Update Status
                                    </label>
                                    <input
                                            th:value="${survey.status.status}"
                                            type="text" name="status"
                                            class="focus:outline-none border-b-1 border-gray-300 text-sm"
                                            id="status">
                                </div>
                                <div class="flex flex-col gap-y-1">
                                    <label for="updatedAt"
                                           class="text-xs font-light">
                                        UpdateAt
                                    </label>
                                    <input
                                            th:value="${survey.updatedAt != null ? #temporals.format(survey.updatedAt,'EEEE, MMMM d, yyyy HH:mm a') : 'Not updated at least once'}"
                                            type="text" name="updatedAt"
                                            class="focus:outline-none border-b-1 border-gray-300 text-sm"
                                            readonly
                                            id="updatedAt">
                                </div>
                                <div class="flex flex-col gap-y-1">
                                    <label for="createdAt"
                                           class="text-xs font-light">
                                        CreatedAt
                                    </label>
                                    <input
                                            th:value="${#temporals.format(survey.createdAt,'EEEE, MMMM d, yyyy HH:mm a')}"
                                            type="text" name="createdAt"
                                            readonly
                                            class="focus:outline-none border-b-1 border-gray-300 text-sm"
                                            id="createdAt">
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-row justify-between mt-8 text-sm">
                            <a th:if="${#authorization.expression('hasAnyAuthority(''Admin'',''Technical'')')}" th:href="@{/technical/survey/allSurvey}" class="px-4 py-2 bg-gray-600 text-white rounded-md flex items-center gap-2 cursor-pointer">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-big-left-dash-icon lucide-arrow-big-left-dash"><path d="M13 9a1 1 0 0 1-1-1V5.061a1 1 0 0 0-1.811-.75l-6.835 6.836a1.207 1.207 0 0 0 0 1.707l6.835 6.835a1 1 0 0 0 1.811-.75V16a1 1 0 0 1 1-1h2a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1z"/><path d="M20 9v6"/></svg>
                                    Back to surveys
                            </a>
                            <a th:if="${#authorization.expression('hasAuthority(''Sale'')')}" th:href="@{/sale/survey/allSurvey}" class="px-4 py-2 bg-gray-600 text-white rounded-md flex items-center gap-2 cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-big-left-dash-icon lucide-arrow-big-left-dash"><path d="M13 9a1 1 0 0 1-1-1V5.061a1 1 0 0 0-1.811-.75l-6.835 6.836a1.207 1.207 0 0 0 0 1.707l6.835 6.835a1 1 0 0 0 1.811-.75V16a1 1 0 0 1 1-1h2a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1z"/><path d="M20 9v6"/></svg>
                                Back to surveys
                            </a>

                            <button th:if="${#authorization.expression('hasAnyAuthority(''Admin'',''Technical'')')}" type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-md flex items-center gap-2 cursor-pointer btn-animated">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-send-icon lucide-send"><path d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"/><path d="m21.854 2.147-10.94 10.939"/></svg>
                                Update Survey
                            </button>
                        </div>
                    </form>
                </div>

            </div>
            <div class="flex-grow-5 survey-map">
                <div class="w-full bg-gradient-to-r from-indigo-500 via-purple-500 to-indigo-500 h-2 rounded-t-md"></div>
                <div class="shadow-md px-3 pb-6">

                    <div class="surveyChartHeader flex flex-row items-center gap-x-2 pt-2 text-lg">
                        <i class="fa-solid fa-map text-indigo-700"></i>
                        Location Map
                    </div>
                    <hr class="my-2 w-full text-gray-200 rounded-t-md">

                    <div id="ShowMap" th:data-lat="${survey.latitude}"
                         th:data-lng="${survey.longitude}"
                         class="w-full rounded-lg border border-gray-300" style="height: 460px;"></div>
                    <div class="p-3 border border-gray-200 rounded-md text-sm mt-3">
                        <p class="font-base">Address</p>
                        <p class="font-light" th:text="${survey.state}+','+${survey.townShip}"></p>
                    </div>
                    <div class="flex flex-row gap-x-3">
                        <div class="p-3 border border-gray-200 rounded-md text-sm mt-3 flex-grow">
                            <p class="font-base">Longitude</p>
                            <p class="font-light" th:text="${survey.longitude}"></p>
                        </div>
                        <div class="p-3 border border-gray-200 rounded-md text-sm mt-3 flex-grow">
                            <p class="font-base">Latitude</p>
                            <p class="font-light" th:text="${survey.latitude}"></p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>

</div>
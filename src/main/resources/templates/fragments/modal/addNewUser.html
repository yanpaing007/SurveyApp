<!-- Add New User Modal -->
<div id="newUser" th:fragment="newUser(new_user_obj,roles)" tabindex="-1" aria-hidden="true"
     class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
  <div class="relative p-4 w-full lg:max-w-xl max-h-full">

    <div class="relative bg-white rounded-lg shadow-sm">

      <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200">
        <h3 class="text-xl font-semibold text-gray-900">
          Create New User
        </h3>
        <button type="button"
                class="text-black cursor-pointer bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
                data-modal-hide="newUser">
          <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
               viewBox="0 0 14 14">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
          </svg>
          <span class="sr-only">Close modal</span>
        </button>
      </div>

      <form th:action="@{/admin/create}"
            th:object="${new_user_obj}"
            th:method="post"
            id="userForm">

        <div class="p-4 md:p-5 space-y-4 grid grid-cols-1 gap-4">
          <div class="w-full mx-auto">
            <div class="flex flex row justify-between">
              <label for="fullName" class="block mb-2 text-sm font-medium text-gray-900">Full Name</label>
              <span id="fullNameError" class="error-message text-red-500 text-sm"></span>
            </div>
            <div class="relative">
              <div class="absolute inset-y-0 start-0 flex items-center ps-3.5">
                <i class="fa-solid fa-signature text-gray-900"></i>
              </div>
              <input
                      type="text"
                      id="fullName"
                      name="fullName"
                      placeholder="Enter user's full name"
                      class="w-full focus:outline-hidden text-sm rounded-lg ps-9 p-2 border border-gray-300 bg-white text-gray-800"/>
            </div>
          </div>

          <div class="w-full mx-auto">
            <div class="flex flex row justify-between">
              <label for="email" class="block mb-2 text-sm font-medium text-gray-900">Email</label>
              <span id="emailError" class="error-message text-red-500 text-sm"></span>
            </div>
            <div class="relative">
              <div class="absolute inset-y-0 start-0 flex items-center ps-3.5">
                <i class="fa-solid fa-envelope text-gray-900"></i>
              </div>
              <input
                      type="email"
                      id="email"
                      name="email"
                      placeholder="Enter user's email"
                      class="w-full focus:outline-hidden text-sm rounded-lg ps-9 p-2 border border-gray-300 bg-white text-gray-800"/>
            </div>
          </div>


          <div class="w-full mx-auto">
            <div class="flex flex row justify-between">
              <label for="phoneNumber" class="block mb-2 text-sm font-medium text-gray-900">Phone Number</label>
              <span id="phoneNumberError" class="error-message text-red-500 text-sm"></span>
            </div>
            <div class="relative">
              <div class="absolute inset-y-0 start-0 flex items-center ps-3.5">
                <i class="fa-solid fa-phone-volume text-gray-900"></i>
              </div>
              <input
                      type="text"
                      id="phoneNumber"
                      name="phoneNumber"
                      placeholder="Enter user's phone number"
                      class="w-full focus:outline-hidden text-sm rounded-lg ps-9 p-2 border border-gray-300 bg-white text-gray-800"/>
            </div>
          </div>


          <div class="w-full mx-auto">
            <div class="flex flex row justify-between">
              <label for="password" class="block mb-2 text-sm font-medium text-gray-900">Password</label>
              <span id="passwordError" class="error-message text-red-500 text-sm"></span>
            </div>
            <div class="relative">
              <div class="absolute inset-y-0 start-0 flex items-center ps-3.5">
                <i class="fa-solid fa-lock text-gray-900"></i>
              </div>
              <input
                      type="password"
                      id="password"
                      name="password"
                      placeholder="Enter user's new password"
                      class="w-full focus:outline-hidden text-sm rounded-lg ps-9 p-2 border border-gray-300 bg-white text-gray-800"/>
            </div>
          </div>


          <div class="w-full mx-auto ">
            <div class="flex flex row justify-between">
              <label for="role" class="block mb-2 text-sm font-medium text-gray-900">Role</label>
              <span id="roleError" class="error-message text-red-500 text-sm"></span>
            </div>
            <div class="relative">
              <div class="absolute inset-y-0 start-0 flex items-center ps-3.5">
                <i class="fa-solid fa-tag text-gray-900"></i>
              </div>
              <select name="role" id="role" class="w-full focus:outline-hidden text-sm rounded-lg ps-8 pe-3 p-2 border border-gray-300 bg-white text-gray-800">
                <option value="" selected disabled>Assign User's role</option>
                <option th:each="role : ${roles}" th:value="${role.id}" th:text="${role.roleName}"></option>
              </select>
            </div>
          </div>

          <div class="flex flex-row justify-end gap-x-1">
            <button data-modal-hide="newUser" type="button" class="px-5 py-2 text-sm bg-black rounded-md text-white cursor-pointer"> Cancel</button>
            <button class="btn-animated px-5 py-2 text-sm bg-indigo-800 rounded-md text-white cursor-pointer" type="submit"><i class="fa-solid fa-user-plus"></i> Submit</button>
          </div>


        </div>

      </form>

    </div>


  </div>
</div>
<script th:if="${#fields.hasErrors()}">
  document.addEventListener("DOMContentLoaded", () => {
    document.getElementById('newUser').classList.remove('hidden');
  });
</script>